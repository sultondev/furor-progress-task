(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"70d0":function(t,e,s){},"71d7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"category-head row justify-between"},[t.categoryTitle.name_uz?e("div",{staticClass:"category__title items-center"},[t._v("\n      "+t._s(t.categoryTitle.name_uz)+"\n    ")]):t._e(),e("q-btn",{staticClass:"products__create",attrs:{color:"primary",size:"12px",label:"Create Item"},on:{click:t.openCreateModal}})],1),e("div",{staticClass:"products-wrapper row wrap justify-between"},t._l(t.categoryData,(function(s){return e("q-card",{key:s.id,staticClass:"my-card"},[e("q-card-section",{staticClass:"bg-primary text-white"},[e("div",{staticClass:"text-h6"},[t._v("\n          "+t._s(s.name_uz)+"\n        ")]),e("div",{staticClass:"text-subtitle2"},[t._v("\n          "+t._s(s.cost)+" sum\n        ")])]),e("q-separator"),e("q-card-actions",{attrs:{align:"left"}},[e("q-btn",{attrs:{color:"secondary",label:"Edit"},on:{click:function(e){return t.openEditModal(s.id)}}}),e("q-btn",{attrs:{color:"red"},on:{click:function(e){return t.deleteCategoryItem(s.id)}},scopedSlots:t._u([{key:"loading",fn:function(){return[t._v("\n            Loading...\n          ")]},proxy:!0}],null,!0)},[t._v("\n          Delete\n          ")])],1)],1)})),1),e("q-dialog",{attrs:{persistent:""},model:{value:t.isModalOpen,callback:function(e){t.isModalOpen=e},expression:"isModalOpen"}},[e("q-card",{staticStyle:{"min-width":"350px"}},[e("FormModal",{attrs:{bla:80*Math.random(),"form-default-data":t.selectedProduct,"dropdown-options":t.formDropdownOptions},on:{submitFormModal:t.submitData,closeModal:t.closeModal}})],1)],1)],1)},o=[],r=(s("14d9"),s("2f62")),i=(s("759c"),function(){var t=this,e=t._self._c;return e("form",{staticClass:"wrapper q-gutter-md",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.onSubmit.apply(null,arguments)}}},[e("q-input",{ref:"name_uz",attrs:{label:"Name","lazy-rules":"",rules:[t=>t&&t.length>0||"Please type something",t=>t.length<=20||"Please use maximum 20 characters"]},model:{value:t.name_uz,callback:function(e){t.name_uz=e},expression:"name_uz"}}),e("q-input",{ref:"cost",attrs:{label:"Cost",mask:"###",rules:[t=>t&&t.length>0||"Please type number"]},model:{value:t.cost,callback:function(e){t.cost=e},expression:"cost"}}),e("q-input",{ref:"address",attrs:{label:"Address",rules:[t=>t&&t.length>0||"Please type something",t=>t.length<=20||"Please use maximum 20 characters"]},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),e("q-select",{ref:"product_type_id",attrs:{rules:[t=>t&&t.id||"Select something"],label:"Select product category",options:t.$props.dropdownOptions,"options-value":t=>t.id?t.id:null,"option-label":t=>t.name_uz?t.name_uz:null},model:{value:t.product_type_id,callback:function(e){t.product_type_id=e},expression:"product_type_id"}}),e("div",{staticClass:"form-actions row justify-between"},[e("q-btn",{attrs:{label:"Cancel",color:"red"},on:{click:function(e){return t.$emit("closeModal")}}}),e("q-btn",{attrs:{label:"Submit",type:"submit",color:"secondary"}})],1)],1)}),d=[],c={data(){return{name_uz:"",product_type_id:{},cost:"",address:"",id:0}},props:{dropdownOptions:{type:Array},formDefaultData:{type:Object}},mounted(){console.log("mounted",this.$props.formDefaultData),this.$props.formDefaultData.name_uz&&(this.name_uz=this.$props.formDefaultData.name_uz,this.product_type_id=this.$props.formDefaultData.product_type_id,this.cost=String(this.$props.formDefaultData.cost),this.address=this.$props.formDefaultData.address,this.id=this.$props.formDefaultData.id)},computed:{formatFormData:function(t){return console.log(t),t=>({...t,product_type_id:t.product_type_id.id})}},methods:{onSubmit(){if(this.$refs.name_uz.validate(),this.$refs.cost.validate(),this.$refs.address.validate(),this.$refs.product_type_id.validate(),this.$refs.name_uz.hasError||this.$refs.cost.hasError||this.$refs.address.hasError||this.$refs.product_type_id.hasError)this.formHasError=!0;else{const t={name_uz:this.name_uz,product_type_id:this.product_type_id.id,cost:Number(this.cost),address:this.address,created_date:Date.parse(new Date)};this.$props.formDefaultData.id&&(t.id=this.$props.formDefaultData.id),this.$emit("submitFormModal",t,this.$props.formDefaultData.id?"put":"post"),this.$emit("closeModal")}}}},n=c,l=(s("f5b2"),s("2877")),u=s("27f9"),p=s("ddd8"),h=s("9c40"),m=s("eebe"),f=s.n(m),_=Object(l["a"])(n,i,d,!1,null,"8f39c0a8",null),y=_.exports;f()(_,"components",{QInput:u["a"],QSelect:p["a"],QBtn:h["a"]});var g={components:{FormModal:y},data(){return{categoryProductList:[],isModalOpen:!1,selectedProduct:{name_uz:null,id:null,cost:null,address:null,product_type_id:null,created_date:null}}},props:{id:{type:String}},created(){this.fetchCategories(),console.log(this.categoryTitle)},computed:{...Object(r["b"])({categoriesListGetter:"category/categoriesListGetter",getCategoryListItemById:"category/getCategoryItemById"}),categoryData:function(){return this.categoryProductList.filter((t=>t.product_type_id==this.$route.params.id))||[]},getCategoryProductItemById(){return t=>{const e=this.categoryProductList.findIndex((e=>e.id==t));return this.categoryProductList[e]}},categoryTitle:function(){return this.getCategoryListItemById(this.$route.params.id)||{}},doesItemExist(){return t=>t.some((t=>t.product_type_id==this.$props.id))},formDropdownOptions(){return this.categoriesListGetter.map((t=>({name_uz:t.name_uz,id:t.id})))}},methods:{submitData(t,e){"put"===e?this.$api.put("/product",t).then((t=>{200===t.status&&(this.cleanSelectedProduct(),this.fetchCategories())})):this.$api.post("/product",t).then((t=>{this.fetchCategories()}))},fetchCategories(){console.log(this.$q),this.$api.get("/product").then((t=>{this.doesItemExist(t.data)&&200===t.status?(this.categoryProductList=t.data,this.categoryData=t.data.filter((t=>t.product_type_id==this.$props.id))):this.$router.push("/not-found")})).catch((t=>{console.log(t),this.$router.push("/not-found")}))},deleteCategoryItem(t){this.$api.delete(`/product/${t}`).then((t=>{200===t.status&&this.fetchCategories()}))},openEditModal(t){this.isModalOpen=!0;const e=this.getCategoryProductItemById(t);this.selectedProduct.id=e.id,this.selectedProduct.name_uz=e.name_uz,this.selectedProduct.cost=e.cost,this.selectedProduct.address=e.address,this.selectedProduct.created_date=e.created_date;const s=this.getCategoryListItemById(e.product_type_id);this.selectedProduct.product_type_id={name_uz:s.name_uz,id:s.id}},openCreateModal(){this.isModalOpen=!0},closeModal(){this.isModalOpen=!1,this.cleanSelectedProduct()},cleanSelectedProduct(){this.selectedProduct.id=null,this.selectedProduct.name_uz=null,this.selectedProduct.cost=null,this.selectedProduct.address=null,this.selectedProduct.product_type_id=null,this.selectedProduct.created_data=null}},watch:{$route(){this.categoryData?console.log(this.categoriesListGetter):this.$router.push("/not-found")}}},b=g,D=(s("bd93"),s("f09f")),$=s("a370"),C=s("eb85"),P=s("4b7e"),v=s("24e8"),z=Object(l["a"])(b,a,o,!1,null,"8ef907d6",null);e["default"]=z.exports;f()(z,"components",{QBtn:h["a"],QCard:D["a"],QCardSection:$["a"],QSeparator:C["a"],QCardActions:P["a"],QDialog:v["a"]})},bd93:function(t,e,s){"use strict";s("d8d4")},d8d4:function(t,e,s){},f5b2:function(t,e,s){"use strict";s("70d0")}}]);